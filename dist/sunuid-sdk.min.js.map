{"version":3,"file":"sunuid-sdk.min.js","sources":["../src/sunuid-sdk.js"],"sourcesContent":["/**\n * SunuID SDK - Package d'int√©gration pour partenaires\n * \n * @version 1.0.0\n * @author SunuID Team\n * @license MIT\n */\n\n(function(window) {\n    'use strict';\n\n    // Configuration par d√©faut\n    const DEFAULT_CONFIG = {\n        apiUrl: window.SunuIDConfig?.apiUrl || 'https://api.sunuid.fayma.sn',\n        clientId: null,\n        secretId: null,\n        type: 2, // Type par d√©faut (2 = authentification)\n        partnerName: 'SunuID', // Nom du partenaire par d√©faut\n        theme: 'light',\n        language: 'fr',\n        autoRefresh: true,\n        refreshInterval: 30000, // 30 secondes\n        onSuccess: null,\n        onError: null,\n        onStatusUpdate: null,\n        onExpired: null,\n        // Nouvelles options de s√©curit√©\n        enableSecurityLogs: true,\n        validateInputs: true,\n        maxRetries: 3,\n        requestTimeout: 10000, // 10 secondes\n        // Options d'initialisation s√©curis√©e\n        secureInit: false,\n        secureInitUrl: (() => {\n            if (window.SunuIDConfig?.apiUrl?.includes('api.sunuid.fayma.sn')) {\n                return 'https://api.sunuid.fayma.sn/secure-init.php';\n            }\n            return window.SunuIDConfig?.apiUrl?.replace('/api', '') + '/secure-init.php' || 'https://api.sunuid.fayma.sn/secure-init.php';\n        })(),\n        token: null\n    };\n\n    /**\n     * Classe principale SunuID\n     */\n    class SunuID {\n        constructor(config = {}) {\n            this.config = { ...DEFAULT_CONFIG, ...config };\n            this.qrCode = null;\n            this.refreshTimer = null;\n            this.isInitialized = false;\n            this.socket = null;\n            \n            // Initialisation asynchrone\n            this.initPromise = this.init();\n        }\n\n        /**\n         * Initialisation du SDK\n         */\n        async init() {\n            try {\n                // Initialisation s√©curis√©e si activ√©e\n                if (this.config.secureInit) {\n                    await this.secureInit();\n                } else {\n                    // Validation s√©curis√©e des param√®tres\n                    if (this.config.validateInputs) {\n                        this.validateSecurityParams();\n                    }\n                }\n\n                // Log de s√©curit√© pour l'initialisation\n                this.logSecurityEvent('SDK_INIT_START', {\n                    apiUrl: this.config.apiUrl,\n                    type: this.config.type,\n                    partnerName: this.config.partnerName,\n                    secureInit: this.config.secureInit\n                });\n\n                // Obscurcir les credentials dans les logs\n                this.obfuscateCredentials();\n\n                this.isInitialized = true;\n                console.log('SunuID SDK initialis√© avec succ√®s');\n                \n                this.logSecurityEvent('SDK_INIT_SUCCESS');\n                \n                // Initialiser la connexion WebSocket\n                this.initWebSocket();\n                \n            } catch (error) {\n                this.logSecurityEvent('SDK_INIT_ERROR', { error: error.message });\n                throw error;\n            }\n        }\n\n        /**\n         * Initialisation s√©curis√©e via PHP\n         */\n        async secureInit() {\n            try {\n                this.logSecurityEvent('SECURE_INIT_START');\n                \n                const initData = {\n                    type: this.config.type,\n                    partnerName: this.config.partnerName,\n                    theme: this.config.theme\n                };\n\n                const response = await fetch(this.config.secureInitUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Accept': 'application/json'\n                    },\n                    body: JSON.stringify(initData)\n                });\n\n                if (!response.ok) {\n                    throw new Error(`Erreur HTTP: ${response.status}`);\n                }\n\n                const result = await response.json();\n                \n                if (!result.success) {\n                    throw new Error(result.error || 'Erreur lors de l\\'initialisation s√©curis√©e');\n                }\n\n                // Stocker le token et les donn√©es s√©curis√©es\n                this.config.token = result.data.token;\n                this.config.apiUrl = result.data.api_url;\n                \n                // D√©coder le token pour r√©cup√©rer les credentials\n                const decodedToken = this.decodeSecureToken(result.data.token);\n                if (decodedToken) {\n                    this.config.clientId = decodedToken.client_id;\n                    this.config.secretId = decodedToken.secret_id;\n                } else {\n                    throw new Error('Impossible de d√©coder le token s√©curis√©');\n                }\n                \n                this.config.expiresIn = result.data.expires_in;\n                this.config.maxRequests = result.data.max_requests;\n                this.config.requestCount = 0;\n\n                this.logSecurityEvent('SECURE_INIT_SUCCESS', {\n                    expiresIn: result.data.expires_in,\n                    maxRequests: result.data.max_requests\n                });\n\n                console.log('‚úÖ Initialisation s√©curis√©e r√©ussie');\n                \n            } catch (error) {\n                this.logSecurityEvent('SECURE_INIT_ERROR', { error: error.message });\n                throw new Error(`√âchec de l'initialisation s√©curis√©e: ${error.message}`);\n            }\n        }\n\n        /**\n         * D√©coder le token s√©curis√©\n         */\n        decodeSecureToken(token) {\n            try {\n                const parts = token.split('.');\n                if (parts.length !== 2) {\n                    console.error('‚ùå Format de token invalide');\n                    return null;\n                }\n                \n                const [payload, signature] = parts;\n                \n                // D√©coder le payload (base64)\n                const decodedPayload = atob(payload);\n                const tokenData = JSON.parse(decodedPayload);\n                \n                // V√©rifier l'expiration\n                if (tokenData.exp && tokenData.exp < Date.now() / 1000) {\n                    console.error('‚ùå Token expir√©');\n                    return null;\n                }\n                \n                console.log('‚úÖ Token d√©cod√© avec succ√®s');\n                return tokenData;\n                \n            } catch (error) {\n                console.error('‚ùå Erreur d√©codage token:', error);\n                return null;\n            }\n        }\n\n        /**\n         * Initialiser la connexion WebSocket\n         */\n        initWebSocket() {\n            try {\n                // V√©rifier si Socket.IO est disponible\n                if (typeof io === 'undefined') {\n                    console.warn('‚ö†Ô∏è Socket.IO non disponible, WebSocket sera initialis√© plus tard');\n                    // R√©essayer apr√®s un d√©lai\n                    setTimeout(() => this.initWebSocket(), 1000);\n                    return;\n                }\n                \n                // Obtenir l'IP du client (simulation)\n                const ip = this.getClientIP();\n                \n                // Initialiser la connexion WebSocket si elle n'existe pas\n                if (!this.socket) {\n                    this.socket = io('wss://samasocket.fayma.sn:9443', {\n                        query: {\n                            token: this.config.clientId,\n                            type: 'web',\n                            userId: this.config.clientId,\n                            username: ip\n                        }\n                    });\n\n                    // Gestion des √©v√©nements WebSocket\n                    this.socket.on('connect', () => {\n                        console.log('üåê WebSocket connect√© avec succ√®s');\n                        console.log('üìä Socket ID:', this.socket.id);\n                    });\n\n                    this.socket.on('disconnect', (reason) => {\n                        console.log('‚ùå WebSocket d√©connect√©:', reason);\n                    });\n\n                    this.socket.on('connect_error', (error) => {\n                        console.error('‚ùå Erreur connexion WebSocket:', error);\n                    });\n\n                    // √âcouter les √©v√©nements sp√©cifiques\n                    this.socket.on('qr_status_update', (data) => {\n                        console.log('üì± Mise √† jour statut QR re√ßue:', data);\n                        this.handleQRStatusUpdate(data);\n                    });\n\n                    this.socket.on('qr_scan_success', (data) => {\n                        console.log('‚úÖ Scan QR r√©ussi re√ßu:', data);\n                        this.handleQRScanSuccess(data);\n                    });\n\n                    this.socket.on('qr_expired', (data) => {\n                        console.log('‚è∞ QR expir√© re√ßu:', data);\n                        this.handleQRExpired(data);\n                    });\n                }\n            } catch (error) {\n                console.error('‚ùå Erreur initialisation WebSocket:', error);\n            }\n        }\n\n        /**\n         * Obtenir l'IP du client (simulation)\n         */\n        getClientIP() {\n            // Simulation - en production, vous pourriez utiliser un service d'IP\n            return '127.0.0.1';\n        }\n\n        /**\n         * Obtenir le nom du type √† partir du num√©ro\n         */\n        getTypeName(type) {\n            switch(type) {\n                case 1: return 'KYC';\n                case 2: return 'AUTH';\n                case 3: return 'SIGNATURE';\n                default: return `TYPE-${type}`;\n            }\n        }\n\n        /**\n         * Validation s√©curis√©e des param√®tres\n         */\n        validateSecurityParams() {\n            const errors = [];\n            \n            // Validation du clientId\n            if (!this.config.clientId || typeof this.config.clientId !== 'string') {\n                errors.push('clientId invalide ou manquant');\n            } else if (this.config.clientId.length < 10) {\n                errors.push('clientId trop court');\n            }\n            \n            // Validation du secretId\n            if (!this.config.secretId || typeof this.config.secretId !== 'string') {\n                errors.push('secretId invalide ou manquant');\n            } else if (this.config.secretId.length < 32) {\n                errors.push('secretId trop court (minimum 32 caract√®res)');\n            }\n            \n            // Validation de l'URL API\n            if (!this.config.apiUrl || !this.isValidUrl(this.config.apiUrl)) {\n                errors.push('apiUrl invalide');\n            }\n            \n            // Validation du type\n            if (![1, 2, 3].includes(this.config.type)) {\n                errors.push('type invalide (doit √™tre 1, 2 ou 3)');\n            }\n            \n            if (errors.length > 0) {\n                this.logSecurityEvent('VALIDATION_ERROR', { errors });\n                throw new Error(`Param√®tres de s√©curit√© invalides: ${errors.join(', ')}`);\n            }\n            \n            this.logSecurityEvent('VALIDATION_SUCCESS');\n        }\n\n        /**\n         * Validation d'URL s√©curis√©e\n         */\n        isValidUrl(string) {\n            try {\n                const url = new URL(string);\n                return url.protocol === 'https:' || url.protocol === 'http:';\n            } catch (_) {\n                return false;\n            }\n        }\n\n        /**\n         * Logs de s√©curit√©\n         */\n        logSecurityEvent(event, data = {}) {\n            if (!this.config.enableSecurityLogs) return;\n            \n            const securityLog = {\n                timestamp: new Date().toISOString(),\n                event: event,\n                data: data,\n                userAgent: navigator.userAgent,\n                url: window.location.href\n            };\n            \n            console.warn('üîí [SECURITY]', securityLog);\n            \n            // Stocker les logs de s√©curit√© (optionnel)\n            if (!window.SunuIDSecurityLogs) {\n                window.SunuIDSecurityLogs = [];\n            }\n            window.SunuIDSecurityLogs.push(securityLog);\n        }\n\n        /**\n         * Chiffrement simple des credentials (pour √©viter l'exposition en clair)\n         */\n        obfuscateCredentials() {\n            // Stocker les vraies valeurs pour les logs de s√©curit√©\n            this.config.originalClientId = this.config.clientId;\n            this.config.originalSecretId = this.config.secretId;\n            \n            // Cr√©er des versions obfusqu√©es pour l'affichage uniquement\n            if (this.config.clientId) {\n                this.config.clientIdDisplay = this.config.clientId.replace(/(.{3}).*(.{3})/, '$1***$2');\n            }\n            if (this.config.secretId) {\n                this.config.secretIdDisplay = this.config.secretId.replace(/(.{4}).*(.{4})/, '$1***$2');\n            }\n        }\n\n        /**\n         * Validation des entr√©es utilisateur\n         */\n        sanitizeInput(input) {\n            if (typeof input !== 'string') return input;\n            \n            // Protection contre les injections XSS basiques\n            return input\n                .replace(/[<>]/g, '') // Supprimer les balises HTML\n                .replace(/javascript:/gi, '') // Supprimer les protocoles dangereux\n                .trim();\n        }\n\n        /**\n         * G√©rer la mise √† jour du statut QR\n         */\n        handleQRStatusUpdate(data) {\n            if (this.config.onStatusUpdate) {\n                this.config.onStatusUpdate(data);\n            }\n        }\n\n        /**\n         * G√©rer le succ√®s du scan QR\n         */\n        handleQRScanSuccess(data) {\n            if (this.config.onSuccess) {\n                this.config.onSuccess(data);\n            }\n        }\n\n        /**\n         * G√©rer l'expiration du QR\n         */\n        handleQRExpired(data) {\n            if (this.config.onExpired) {\n                this.config.onExpired(data);\n            }\n        }\n\n        /**\n         * √âmettre un √©v√©nement WebSocket\n         */\n        emitWebSocketEvent(event, data) {\n            if (this.socket && this.socket.connected) {\n                this.socket.emit(event, data);\n                console.log(`üì§ √âv√©nement WebSocket √©mis: ${event}`, data);\n            } else if (typeof io === 'undefined') {\n                console.warn('‚ö†Ô∏è Socket.IO non disponible, impossible d\\'√©mettre l\\'√©v√©nement:', event);\n            } else {\n                console.warn('‚ö†Ô∏è WebSocket non connect√©, impossible d\\'√©mettre l\\'√©v√©nement:', event);\n            }\n        }\n\n        /**\n         * Obtenir le statut de la connexion WebSocket\n         */\n        getWebSocketStatus() {\n            if (!this.socket) {\n                return 'not_initialized';\n            }\n            return this.socket.connected ? 'connected' : 'disconnected';\n        }\n\n        /**\n         * Forcer l'initialisation WebSocket (si Socket.IO devient disponible plus tard)\n         */\n        forceWebSocketInit() {\n            if (typeof io !== 'undefined' && !this.socket) {\n                console.log('üîÑ For√ßage de l\\'initialisation WebSocket...');\n                this.initWebSocket();\n            }\n        }\n\n        /**\n         * G√©n√©rer un QR code avec le type configur√©\n         */\n        async generateQR(containerId, options = {}) {\n            // Attendre l'initialisation si n√©cessaire\n            if (this.initPromise) {\n                await this.initPromise;\n                this.initPromise = null;\n            }\n            \n            if (!this.isInitialized) {\n                throw new Error('SunuID: SDK non initialis√©');\n            }\n\n            try {\n                const response = await this.makeRequest('/qr-generate', {\n                    type: this.config.type, // Utilise le type configur√©\n                    ...options\n                });\n\n                if (response.success) {\n                    // Construire l'URL compl√®te de l'image QR avec la base URL pour les images\n                    const imageBaseUrl = 'https://sunuid.fayma.sn';\n                    const qrImageUrl = `${imageBaseUrl}${response.data.qrcode}`;\n                    this.currentQRUrl = qrImageUrl; // Stocker l'URL pour getQRCode()\n                    this.displayQRCode(containerId, qrImageUrl, this.config.type, options);\n                    \n                    // G√©n√©rer le QR code personnalis√© avec le type + code de l'API + socket ID\n                    if (this.pendingQRInfo && response.data.code) {\n                        // Attendre que le socket ID soit bien d√©fini\n                        const waitForSocketId = () => {\n                            if (this.socket && this.socket.id && this.socket.id !== 'unknown') {\n                                const socketId = this.socket.id;\n                                const qrContent = `${this.config.type}-${response.data.code}-${socketId}`;\n                                \n                                // Utiliser le partnerName de la r√©ponse API et le nom du type\n                                const partnerName = response.data.partnerName || this.config.partnerName || 'SunuID';\n                                const typeName = this.getTypeName(this.config.type);\n                                const qrLabel = `${typeName} - ${partnerName}`;\n                                \n                                this.generateCustomQRCode(qrContent, qrLabel, this.pendingQRInfo.options);\n                                this.pendingQRInfo = null; // Nettoyer\n                            } else {\n                                // R√©essayer apr√®s un d√©lai si le socket ID n'est pas encore disponible\n                                setTimeout(waitForSocketId, 100);\n                            }\n                        };\n                        \n                        waitForSocketId();\n                    }\n                    \n                    this.startAutoRefresh(containerId, this.config.type, options);\n                    \n                    // √âmettre un √©v√©nement WebSocket pour la g√©n√©ration du QR\n                    this.emitWebSocketEvent('qr_generated', {\n                        serviceId: response.data.service_id,\n                        type: this.config.type,\n                        qrCodeUrl: qrImageUrl,\n                        code: response.data.code,\n                        timestamp: Date.now()\n                    });\n                    \n                    return {\n                        ...response.data,\n                        qrCodeUrl: qrImageUrl,\n                        sessionId: response.data.service_id\n                    };\n                } else {\n                    throw new Error(response.message || 'Erreur lors de la g√©n√©ration du QR code');\n                }\n            } catch (error) {\n                console.error('Erreur API d√©tect√©e:', error.message);\n                console.error('Stack trace complet:', error.stack);\n                console.error('Configuration SDK:', {\n                    apiUrl: this.config.apiUrl,\n                    type: this.config.type,\n                    secureInit: this.config.secureInit,\n                    clientId: this.config.clientId ? '***' + this.config.clientId.slice(-4) : 'null',\n                    secretId: this.config.secretId ? '***' + this.config.secretId.slice(-4) : 'null'\n                });\n                console.log('Affichage du message \"Service non disponible\" pour type ' + this.config.type);\n                this.displayServiceUnavailable(containerId, this.config.type);\n                throw new Error('Service non disponible');\n            }\n        }\n\n\n\n        /**\n         * G√©n√©rer un QR code avec un type personnalis√©\n         */\n        async generateCustomQR(containerId, type, options = {}) {\n            // Attendre l'initialisation si n√©cessaire\n            if (this.initPromise) {\n                await this.initPromise;\n                this.initPromise = null;\n            }\n            \n            if (!this.isInitialized) {\n                throw new Error('SunuID: SDK non initialis√©');\n            }\n\n            try {\n                const response = await this.makeRequest('/qr-generate', {\n                    type: type, // Type personnalis√© (1, 2, 3, etc.)\n                    ...options\n                });\n\n                if (response.success) {\n                    // Construire l'URL compl√®te de l'image QR avec la base URL pour les images\n                    const imageBaseUrl = 'https://sunuid.fayma.sn';\n                    const qrImageUrl = `${imageBaseUrl}${response.data.qrcode}`;\n                    this.displayQRCode(containerId, qrImageUrl, type, options);\n                    \n                    // G√©n√©rer le QR code personnalis√© avec le type + code de l'API + socket ID\n                    if (this.pendingQRInfo && response.data.code) {\n                        // Attendre que le socket ID soit bien d√©fini\n                        const waitForSocketId = () => {\n                            if (this.socket && this.socket.id && this.socket.id !== 'unknown') {\n                                const socketId = this.socket.id;\n                                const qrContent = `${type}-${response.data.code}-${socketId}`;\n                                \n                                // Utiliser le partnerName de la r√©ponse API et le nom du type\n                                const partnerName = response.data.partnerName || this.config.partnerName || 'SunuID';\n                                const typeName = this.getTypeName(type);\n                                const qrLabel = `${typeName} - ${partnerName}`;\n                                \n                                this.generateCustomQRCode(qrContent, qrLabel, this.pendingQRInfo.options);\n                                this.pendingQRInfo = null; // Nettoyer\n                            } else {\n                                // R√©essayer apr√®s un d√©lai si le socket ID n'est pas encore disponible\n                                setTimeout(waitForSocketId, 100);\n                            }\n                        };\n                        \n                        waitForSocketId();\n                    }\n                    \n                    this.startAutoRefresh(containerId, type, options);\n                    return {\n                        ...response.data,\n                        qrCodeUrl: qrImageUrl,\n                        sessionId: response.data.service_id\n                    };\n                } else {\n                    throw new Error(response.message || 'Erreur lors de la g√©n√©ration du QR code');\n                }\n            } catch (error) {\n                console.error('Erreur API d√©tect√©e:', error.message);\n                console.error('Stack trace complet:', error.stack);\n                console.error('Configuration SDK (Custom):', {\n                    apiUrl: this.config.apiUrl,\n                    type: type,\n                    secureInit: this.config.secureInit,\n                    clientId: this.config.clientId ? '***' + this.config.clientId.slice(-4) : 'null',\n                    secretId: this.config.secretId ? '***' + this.config.secretId.slice(-4) : 'null'\n                });\n                console.log('Affichage du message \"Service non disponible\" pour type ' + type);\n                this.displayServiceUnavailable(containerId, type);\n                throw new Error('Service non disponible');\n            }\n        }\n\n        // Alias pour maintenir la compatibilit√©\n        async generateAuthQR(containerId, options = {}) {\n            return this.generateQR(containerId, options);\n        }\n\n        async generateKYCQR(containerId, options = {}) {\n            // Sauvegarder le type actuel\n            const originalType = this.config.type;\n            // Changer temporairement le type pour KYC\n            this.config.type = 1;\n            try {\n                return await this.generateQR(containerId, options);\n            } finally {\n                // Restaurer le type original\n                this.config.type = originalType;\n            }\n        }\n\n        async generateSignatureQR(containerId, options = {}) {\n            // Sauvegarder le type actuel\n            const originalType = this.config.type;\n            // Changer temporairement le type pour Signature\n            this.config.type = 3;\n            try {\n                return await this.generateQR(containerId, options);\n            } finally {\n                // Restaurer le type original\n                this.config.type = originalType;\n            }\n        }\n\n        /**\n         * V√©rifier le statut d'un QR code\n         */\n        async checkQRStatus(sessionId) {\n            if (!this.isInitialized) {\n                throw new Error('SunuID: SDK non initialis√©');\n            }\n\n            try {\n                const response = await this.makeRequest('/qr-status', {\n                    serviceId: sessionId\n                });\n\n                if (response.success) {\n                    return response.data;\n                } else {\n                    throw new Error(response.message || 'Erreur lors de la v√©rification du statut');\n                }\n            } catch (error) {\n                this.handleError(error);\n                throw error;\n            }\n        }\n\n        /**\n         * Afficher un QR code dans un conteneur\n         */\n        displayQRCode(containerId, qrUrl, type, options = {}) {\n            const container = document.getElementById(containerId);\n            if (!container) {\n                throw new Error(`Conteneur avec l'ID \"${containerId}\" non trouv√©`);\n            }\n\n            // Nettoyer le conteneur\n            container.innerHTML = '';\n\n            // Cr√©er l'√©l√©ment QR code\n            const qrElement = document.createElement('div');\n            qrElement.className = 'sunuid-qr-code';\n            \n            // Afficher un loader en attendant la r√©ponse API et la connexion socket\n            const typeName = this.getTypeName(type);\n            qrElement.innerHTML = `\n                <div class=\"sunuid-qr-header\">\n                    <h3>${type === 1 ? 'V√©rification KYC' : type === 2 ? 'Authentification' : type === 3 ? 'Signature' : 'Service Type ' + type}</h3>\n                </div>\n                <div class=\"sunuid-qr-image\" id=\"sunuid-qr-container\">\n                    <div style=\"text-align: center; padding: 40px;\">\n                        <div class=\"sunuid-loader\">\n                            <div class=\"sunuid-spinner\"></div>\n                            <p style=\"margin-top: 20px; color: #666;\">Initialisation en cours...</p>\n                            <p style=\"font-size: 12px; color: #999; margin-top: 10px;\">Connexion API et WebSocket</p>\n                            <p style=\"font-size: 11px; color: #ccc; margin-top: 5px;\">Attente du Socket ID...</p>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"sunuid-qr-instructions\" style=\"display: none;\">\n                    <p>Scannez ce QR code avec l'application ${this.config.partnerName} pour vous connecter</p>\n                </div>\n                <div class=\"sunuid-qr-status\" id=\"sunuid-status\" style=\"display: none;\">\n                    <p>En attente de scan...</p>\n                </div>\n            `;\n\n            container.appendChild(qrElement);\n\n            // Stocker les informations pour la g√©n√©ration ult√©rieure\n            this.pendingQRInfo = {\n                containerId,\n                type,\n                options\n            };\n\n            // Appliquer le th√®me\n            this.applyTheme(options.theme || this.config.theme);\n        }\n\n        /**\n         * G√©n√©rer un QR code personnalis√© avec PHP Endroid\n         */\n        async generateCustomQRCode(content, label, options = {}) {\n            try {\n                console.log('üé® D√©but g√©n√©ration QR personnalis√© avec PHP...');\n                console.log('üìÑ Contenu:', content);\n                console.log('üè∑Ô∏è Label:', label);\n                \n                const qrContainer = document.getElementById('sunuid-qr-container');\n                if (!qrContainer) {\n                    console.error('‚ùå QR container not found');\n                    this.displayFallbackImage();\n                    return;\n                }\n                \n                console.log('‚úÖ QR container trouv√©');\n\n                // Nettoyer le conteneur\n                qrContainer.innerHTML = '<div style=\"text-align: center; padding: 20px;\"><p>G√©n√©ration QR code avec PHP...</p></div>';\n\n                // Appeler l'endpoint PHP\n                console.log('üîÑ Appel endpoint PHP...');\n                // Construire l'URL du QR generator de mani√®re plus robuste\n                let qrGeneratorUrl;\n                if (this.config.apiUrl.includes('api.sunuid.fayma.sn')) {\n                    qrGeneratorUrl = 'https://api.sunuid.fayma.sn/qr-generator.php';\n                } else {\n                    qrGeneratorUrl = this.config.apiUrl.replace('/api', '') + '/qr-generator.php';\n                }\n                console.log('üîó URL QR Generator:', qrGeneratorUrl);\n                const response = await fetch(qrGeneratorUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Accept': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        content: content,\n                        label: label,\n                        size: 300,\n                        margin: 10\n                    })\n                });\n                \n                console.log('üì• R√©ponse PHP re√ßue - Status:', response.status);\n                \n                if (!response.ok) {\n                    throw new Error(`Erreur HTTP: ${response.status}`);\n                }\n                \n                const responseData = await response.json();\n                \n                if (!responseData.success) {\n                    throw new Error(`Erreur PHP: ${responseData.error}`);\n                }\n                \n                console.log('‚úÖ QR code g√©n√©r√© par PHP avec succ√®s');\n                console.log('üìä Taille:', responseData.data.size + 'px');\n                console.log('üìä Longueur base64:', responseData.data.length + ' caract√®res');\n\n                // Stocker l'URL du QR code pour getQRCode()\n                this.currentQRUrl = responseData.data.dataUrl;\n                \n                // Cr√©er le conteneur avec le QR code PHP\n                qrContainer.innerHTML = `\n                    <div class=\"sunuid-qr-ready\" style=\"text-align: center; padding: 20px;\">\n                        <img src=\"${responseData.data.dataUrl}\" alt=\"QR Code ${this.config.partnerName}\" style=\"max-width: 300px; border: 2px solid #ddd; border-radius: 10px;\">\n                    </div>\n                `;\n                \n                // Afficher les instructions et le statut maintenant que le QR est pr√™t\n                const instructionsElement = qrContainer.parentElement.querySelector('.sunuid-qr-instructions');\n                const statusElement = qrContainer.parentElement.querySelector('.sunuid-qr-status');\n                \n                if (instructionsElement) {\n                    instructionsElement.style.display = 'block';\n                    instructionsElement.classList.add('sunuid-qr-ready');\n                }\n                if (statusElement) {\n                    statusElement.style.display = 'block';\n                    statusElement.classList.add('sunuid-qr-ready');\n                }\n                \n                console.log('‚úÖ QR code PHP affich√© dans le conteneur');\n\n            } catch (error) {\n                console.error('‚ùå Erreur g√©n√©ration QR PHP:', error);\n                console.error('Stack trace:', error.stack);\n                \n                // D√©tecter les erreurs CORS sp√©cifiquement\n                if (error.message.includes('Failed to fetch') || error.message.includes('CORS')) {\n                    console.warn('üö´ Erreur CORS d√©tect√©e, tentative de g√©n√©ration QR c√¥t√© client...');\n                    this.generateQRCodeClientSide(content, label, qrContainer);\n                } else {\n                    this.displayFallbackImage();\n                }\n            }\n        }\n\n        /**\n         * G√©n√©rer un QR code c√¥t√© client en cas d'erreur CORS\n         */\n        generateQRCodeClientSide(content, label, qrContainer) {\n            try {\n                console.log('üé® G√©n√©ration QR c√¥t√© client...');\n                \n                // V√©rifier si QRCode est disponible\n                if (typeof QRCode === 'undefined') {\n                    console.error('‚ùå QRCode library non disponible');\n                    this.displayFallbackImage();\n                    return;\n                }\n                \n                // Cr√©er un canvas pour le QR code\n                const canvas = document.createElement('canvas');\n                canvas.width = 300;\n                canvas.height = 300;\n                const ctx = canvas.getContext('2d');\n                \n                // G√©n√©rer le QR code avec QRCode library\n                QRCode.toCanvas(canvas, content, {\n                    width: 280,\n                    margin: 10,\n                    color: {\n                        dark: '#000000',\n                        light: '#FFFFFF'\n                    }\n                }, (error) => {\n                    if (error) {\n                        console.error('‚ùå Erreur g√©n√©ration QR c√¥t√© client:', error);\n                        this.displayFallbackImage();\n                        return;\n                    }\n                    \n                    // Ajouter le label en bas du QR code\n                    ctx.fillStyle = '#333333';\n                    ctx.font = '14px Arial';\n                    ctx.textAlign = 'center';\n                    ctx.fillText(label, 150, 295);\n                    \n                    // Convertir en data URL\n                    const dataUrl = canvas.toDataURL('image/png');\n                    \n                    // Stocker l'URL du QR code pour getQRCode()\n                    this.currentQRUrl = dataUrl;\n                    \n                    // Afficher le QR code\n                    qrContainer.innerHTML = `\n                        <div class=\"sunuid-qr-ready\" style=\"text-align: center; padding: 20px;\">\n                            <img src=\"${dataUrl}\" alt=\"QR Code ${this.config.partnerName}\" style=\"max-width: 300px; border: 2px solid #ddd; border-radius: 10px;\">\n                            <p style=\"margin-top: 10px; font-size: 12px; color: #666;\">G√©n√©r√© c√¥t√© client (CORS)</p>\n                        </div>\n                    `;\n                    \n                    // Afficher les instructions et le statut\n                    const instructionsElement = qrContainer.parentElement.querySelector('.sunuid-qr-instructions');\n                    const statusElement = qrContainer.parentElement.querySelector('.sunuid-qr-status');\n                    \n                    if (instructionsElement) {\n                        instructionsElement.style.display = 'block';\n                        instructionsElement.classList.add('sunuid-qr-ready');\n                    }\n                    if (statusElement) {\n                        statusElement.style.display = 'block';\n                        statusElement.classList.add('sunuid-qr-ready');\n                    }\n                    \n                    console.log('‚úÖ QR code c√¥t√© client g√©n√©r√© avec succ√®s');\n                });\n                \n            } catch (error) {\n                console.error('‚ùå Erreur g√©n√©ration QR c√¥t√© client:', error);\n                this.displayFallbackImage();\n            }\n        }\n\n        /**\n         * Ajouter le logo au centre du QR code\n         */\n        addLogoToCenter(ctx, x, y, width, height) {\n            try {\n                // Cr√©er une image pour le logo\n                const logo = new Image();\n                logo.onload = () => {\n                    const logoSize = 40;\n                    const logoX = x + (width - logoSize) / 2;\n                    const logoY = y + (width - logoSize) / 2;\n\n                    // Dessiner un fond blanc pour le logo\n                    ctx.fillStyle = 'white';\n                    ctx.fillRect(logoX - 2, logoY - 2, logoSize + 4, logoSize + 4);\n\n                    // Dessiner le logo\n                    ctx.drawImage(logo, logoX, logoY, logoSize, logoSize);\n                };\n                logo.src = 'src/logoqr.png';\n            } catch (error) {\n                console.warn('Logo non disponible:', error);\n            }\n        }\n\n        /**\n         * Afficher l'image de fallback\n         */\n        displayFallbackImage() {\n            console.log('‚ö†Ô∏è Affichage de l\\'image de fallback');\n            const qrContainer = document.getElementById('sunuid-qr-container');\n            if (qrContainer) {\n                qrContainer.innerHTML = `\n                    <div style=\"text-align: center; padding: 20px; color: #666;\">\n                        <p>‚ö†Ô∏è G√©n√©ration QR personnalis√© non disponible</p>\n                        <p>Utilisation de l'image par d√©faut</p>\n                        <p><strong>Debug:</strong> QRCode disponible: ${typeof QRCode !== 'undefined'}</p>\n                        <p><strong>Debug:</strong> Container trouv√©: ${qrContainer !== null}</p>\n                    </div>\n                `;\n            } else {\n                console.error('‚ùå Container QR non trouv√© pour fallback');\n            }\n        }\n\n        /**\n         * Afficher \"Service non disponible\"\n         */\n        displayServiceUnavailable(containerId, type) {\n            console.log(`displayServiceUnavailable appel√©e pour ${containerId}, type: ${type}`);\n            const container = document.getElementById(containerId);\n            if (!container) {\n                console.error(`Container ${containerId} non trouv√©`);\n                return;\n            }\n\n            container.innerHTML = `\n                <div class=\"sunuid-service-unavailable\" style=\"\n                    text-align: center;\n                    padding: 40px 20px;\n                    background: #f8f9fa;\n                    border: 2px dashed #dee2e6;\n                    border-radius: 10px;\n                    color: #6c757d;\n                    font-family: Arial, sans-serif;\n                \">\n                    <div style=\"font-size: 48px; margin-bottom: 20px;\">‚ö†Ô∏è</div>\n                    <h3 style=\"margin: 0 0 10px 0; color: #495057;\">Service Non Disponible</h3>\n                    <p style=\"margin: 0; font-size: 14px;\">\n                        Le service d'authentification est temporairement indisponible.<br>\n                        Veuillez r√©essayer plus tard.\n                    </p>\n                    <div style=\"margin-top: 20px; font-size: 12px; color: #adb5bd;\">\n                        Type: ${String(type).toUpperCase()}\n                    </div>\n                </div>\n            `;\n        }\n\n        /**\n         * Rafra√Æchir un QR code\n         */\n        async refreshQR(containerId, options = {}) {\n            try {\n                const result = await this.generateQR(containerId, options);\n                return result;\n            } catch (error) {\n                console.error('Erreur lors du rafra√Æchissement:', error.message);\n                this.displayServiceUnavailable(containerId, this.config.type);\n                throw error;\n            }\n        }\n\n        /**\n         * D√©marrer le rafra√Æchissement automatique\n         */\n        startAutoRefresh(containerId, type, options) {\n            if (!this.config.autoRefresh) return;\n\n            this.refreshTimer = setInterval(async () => {\n                try {\n                    await this.refreshQR(containerId, type, options);\n                } catch (error) {\n                    console.warn('Erreur lors du rafra√Æchissement automatique:', error);\n                }\n            }, this.config.refreshInterval);\n        }\n\n        /**\n         * D√©marrer le timer de compte √† rebours\n         */\n\n\n        /**\n         * Effectuer une requ√™te API s√©curis√©e\n         */\n        async makeRequest(endpoint, data) {\n            // Validation de s√©curit√©\n            if (!this.isInitialized) {\n                this.logSecurityEvent('REQUEST_BEFORE_INIT', { endpoint });\n                throw new Error('SDK non initialis√©');\n            }\n\n            // V√©rifier les limites de requ√™tes pour l'initialisation s√©curis√©e\n            if (this.config.secureInit) {\n                this.config.requestCount++;\n                if (this.config.requestCount > this.config.maxRequests) {\n                    this.logSecurityEvent('API_REQUEST_LIMIT_EXCEEDED', { \n                        requestCount: this.config.requestCount,\n                        maxRequests: this.config.maxRequests \n                    });\n                    throw new Error('Limite de requ√™tes d√©pass√©e');\n                }\n            }\n\n            // Sanitisation des donn√©es\n            const sanitizedData = this.sanitizeRequestData(data);\n            \n            // Debug: Afficher les donn√©es envoy√©es\n            console.log('üîç Debug makeRequest - endpoint:', endpoint);\n            console.log('üîç Debug makeRequest - apiUrl:', this.config.apiUrl);\n            console.log('üîç Debug makeRequest - url:', `${this.config.apiUrl}${endpoint}`);\n            console.log('üîç Debug makeRequest - data:', JSON.stringify(sanitizedData, null, 2));\n            console.log('üîç Debug makeRequest - secureInit:', this.config.secureInit);\n            console.log('üîç Debug makeRequest - isInitialized:', this.isInitialized);\n            \n            // Utiliser l'endpoint depuis la configuration si disponible\n            const endpointPath = window.SunuIDConfig?.endpoints?.[endpoint.replace('/', '')] || endpoint;\n            const url = `${this.config.apiUrl}${endpointPath}`;\n            \n            // Debug: Afficher l'URL finale\n            console.log('üîç URL finale construite:', url);\n            console.log('üîç EndpointPath:', endpointPath);\n            console.log('üîç SunuIDConfig endpoints:', JSON.stringify(window.SunuIDConfig?.endpoints));\n            \n            // Log de s√©curit√© pour la requ√™te\n            this.logSecurityEvent('API_REQUEST_START', {\n                endpoint: endpointPath,\n                url: url,\n                dataKeys: Object.keys(sanitizedData),\n                secureInit: this.config.secureInit\n            });\n            \n            let retryCount = 0;\n            const maxRetries = this.config.maxRetries;\n            \n            while (retryCount <= maxRetries) {\n                try {\n                    const controller = new AbortController();\n                    const timeoutId = setTimeout(() => controller.abort(), this.config.requestTimeout);\n                    \n                    // Headers minimaux (API SunuID n'accepte que les headers essentiels)\n                    const headers = {\n                        'Content-Type': 'application/json'\n                    };\n\n                    // Note: En mode s√©curis√©, les credentials sont dans le body\n                    // Pas besoin d'ajouter de header sp√©cial pour √©viter les probl√®mes CORS\n                    // if (this.config.secureInit && this.config.token) {\n                    //     headers['X-Secure-Token'] = this.config.token;\n                    // }\n                    \n                    const response = await fetch(url, {\n                        method: 'POST',\n                        headers: headers,\n                        body: JSON.stringify(sanitizedData),\n                        signal: controller.signal\n                    });\n\n                    clearTimeout(timeoutId);\n\n                    if (!response.ok) {\n                        const errorText = await response.text();\n                        let errorData;\n                        try {\n                            errorData = JSON.parse(errorText);\n                        } catch (e) {\n                            errorData = { message: errorText };\n                        }\n                        \n                        this.logSecurityEvent('API_REQUEST_ERROR', {\n                            status: response.status,\n                            statusText: response.statusText,\n                            error: errorData.message\n                        });\n                        \n                        throw new Error(errorData.message || `Erreur HTTP: ${response.status}`);\n                    }\n\n                    const result = await response.json();\n                    \n                    this.logSecurityEvent('API_REQUEST_SUCCESS', {\n                        endpoint: endpointPath,\n                        responseKeys: Object.keys(result)\n                    });\n                    \n                    return result;\n                    \n                } catch (error) {\n                    retryCount++;\n                    \n                    if (error.name === 'AbortError') {\n                        this.logSecurityEvent('API_REQUEST_TIMEOUT', { retryCount });\n                        if (retryCount > maxRetries) {\n                            throw new Error('Timeout de la requ√™te API');\n                        }\n                        continue;\n                    }\n                    \n                    if (retryCount > maxRetries) {\n                        this.logSecurityEvent('API_REQUEST_MAX_RETRIES', { \n                            retryCount, \n                            error: error.message \n                        });\n                        throw error;\n                    }\n                    \n                    // Attendre avant de r√©essayer\n                    await new Promise(resolve => setTimeout(resolve, 1000 * retryCount));\n                }\n            }\n        }\n\n        /**\n         * Sanitisation des donn√©es de requ√™te\n         */\n        sanitizeRequestData(data) {\n            const sanitized = {};\n            \n            for (const [key, value] of Object.entries(data)) {\n                if (typeof value === 'string') {\n                    sanitized[key] = this.sanitizeInput(value);\n                } else if (typeof value === 'object' && value !== null) {\n                    sanitized[key] = this.sanitizeRequestData(value);\n                } else {\n                    sanitized[key] = value;\n                }\n            }\n            \n            // Ajouter les credentials dans le body (API SunuID les attend ici)\n            // Utiliser les vraies valeurs (originales) si disponibles, sinon les valeurs directes\n            sanitized.client_id = this.config.originalClientId || this.config.clientId;\n            sanitized.secret_id = this.config.originalSecretId || this.config.secretId;\n            \n            // Debug: V√©rifier les credentials\n            console.log('üîç Credentials dans sanitizeRequestData - clientId:', this.config.clientId);\n            console.log('üîç Credentials dans sanitizeRequestData - secretId:', this.config.secretId ? '***' + this.config.secretId.slice(-4) : 'null');\n            console.log('üîç Credentials dans sanitizeRequestData - sanitizedClientId:', sanitized.client_id);\n            console.log('üîç Credentials dans sanitizeRequestData - sanitizedSecretId:', sanitized.secret_id ? '***' + sanitized.secret_id.slice(-4) : 'null');\n            console.log('üîç Credentials dans sanitizeRequestData - data complet:', JSON.stringify(sanitized, null, 2));\n            \n            // Debug: V√©rifier les credentials\n            console.log('üîç Credentials dans sanitizeRequestData - clientId:', this.config.clientId);\n            console.log('üîç Credentials dans sanitizeRequestData - secretId:', this.config.secretId ? '***' + this.config.secretId.slice(-4) : 'null');\n            console.log('üîç Credentials dans sanitizeRequestData - sanitizedClientId:', sanitized.client_id);\n            console.log('üîç Credentials dans sanitizeRequestData - sanitizedSecretId:', sanitized.secret_id ? '***' + sanitized.secret_id.slice(-4) : 'null');\n            console.log('üîç Credentials dans sanitizeRequestData - data complet:', JSON.stringify(sanitized, null, 2));\n            \n            return sanitized;\n        }\n\n        /**\n         * G√©n√©rer un ID de requ√™te unique\n         */\n        generateRequestId() {\n            return 'req_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n        }\n\n        /**\n         * Appliquer le th√®me\n         */\n        applyTheme(theme) {\n            const container = document.querySelector('.sunuid-qr-code');\n            if (container) {\n                container.className = `sunuid-qr-code sunuid-theme-${theme}`;\n            }\n        }\n\n        /**\n         * G√©rer les erreurs\n         */\n        handleError(error) {\n            console.error('SunuID SDK Error:', error);\n            \n            if (this.config.onError) {\n                this.config.onError(error);\n            }\n        }\n\n        /**\n         * Obtenir l'URL du QR code g√©n√©r√©\n         */\n        getQRCode() {\n            // Retourner l'URL du QR code si disponible\n            if (this.currentQRUrl) {\n                return this.currentQRUrl;\n            }\n            \n            // Sinon, retourner une URL par d√©faut ou null\n            return null;\n        }\n\n        /**\n         * Nettoyer les ressources\n         */\n        destroy() {\n            if (this.refreshTimer) {\n                clearInterval(this.refreshTimer);\n            }\n            \n            // Fermer la connexion WebSocket\n            if (this.socket) {\n                this.socket.disconnect();\n                this.socket = null;\n                console.log('üåê WebSocket d√©connect√©');\n            }\n            \n            this.isInitialized = false;\n            this.logSecurityEvent('SDK_DESTROY');\n            console.log('SunuID SDK d√©truit');\n        }\n\n        /**\n         * Obtenir les logs de s√©curit√©\n         */\n        getSecurityLogs() {\n            return window.SunuIDSecurityLogs || [];\n        }\n\n        /**\n         * Nettoyer les logs de s√©curit√©\n         */\n        clearSecurityLogs() {\n            window.SunuIDSecurityLogs = [];\n            this.logSecurityEvent('SECURITY_LOGS_CLEARED');\n        }\n    }\n\n    // Exposer la classe globalement\n    window.SunuID = SunuID;\n    window.sunuidInstance = null;\n\n    // Fonction d'initialisation globale\n    window.initSunuID = function(config) {\n        try {\n            window.sunuidInstance = new SunuID(config);\n            return window.sunuidInstance;\n        } catch (error) {\n            console.error('Erreur lors de l\\'initialisation de SunuID:', error);\n            throw error;\n        }\n    };\n\n})(window); "],"names":["window","_window$SunuIDConfig","_window$SunuIDConfig2","_window$SunuIDConfig3","DEFAULT_CONFIG","apiUrl","SunuIDConfig","clientId","secretId","type","partnerName","theme","language","autoRefresh","refreshInterval","onSuccess","onError","onStatusUpdate","onExpired","enableSecurityLogs","validateInputs","maxRetries","requestTimeout","secureInit","secureInitUrl","includes","replace","token","SunuID","config","arguments","length","undefined","_classCallCheck","this","_objectSpread","qrCode","refreshTimer","isInitialized","socket","initPromise","init","key","value","_init","_asyncToGenerator","_regenerator","m","_callee","_t","w","_context","p","n","validateSecurityParams","logSecurityEvent","obfuscateCredentials","console","log","initWebSocket","v","error","message","a","apply","_secureInit","_callee2","initData","response","result","decodedToken","_t2","_context2","fetch","method","headers","Accept","body","JSON","stringify","ok","Error","concat","status","json","success","data","api_url","decodeSecureToken","client_id","secret_id","expiresIn","expires_in","maxRequests","max_requests","requestCount","parts","split","_parts","_slicedToArray","payload","decodedPayload","atob","tokenData","parse","exp","Date","now","_this","io","warn","setTimeout","ip","getClientIP","query","userId","username","on","id","reason","handleQRStatusUpdate","handleQRScanSuccess","handleQRExpired","errors","push","isValidUrl","join","string","url","URL","protocol","_","event","securityLog","timestamp","toISOString","userAgent","navigator","location","href","SunuIDSecurityLogs","originalClientId","originalSecretId","clientIdDisplay","secretIdDisplay","input","trim","connected","emit","_generateQR","_callee3","containerId","options","qrImageUrl","_waitForSocketId","_t3","_this2","_args3","_context3","makeRequest","qrcode","currentQRUrl","displayQRCode","pendingQRInfo","code","waitForSocketId","socketId","qrContent","typeName","getTypeName","qrLabel","generateCustomQRCode","startAutoRefresh","emitWebSocketEvent","serviceId","service_id","qrCodeUrl","sessionId","stack","slice","displayServiceUnavailable","_x","_generateCustomQR","_callee4","_response","_waitForSocketId2","_t4","_this3","_args4","_context4","_x2","_x3","_generateAuthQR","_callee5","_args5","_context5","generateQR","_x4","_generateKYCQR","_callee6","originalType","_args6","_context6","f","_x5","_generateSignatureQR","_callee7","_args7","_context7","_x6","_checkQRStatus","_callee8","_response2","_t5","_context8","handleError","_x7","qrUrl","container","document","getElementById","innerHTML","qrElement","createElement","className","appendChild","applyTheme","_generateCustomQRCode","_callee9","content","label","_qrContainer","qrGeneratorUrl","_response3","responseData","instructionsElement","statusElement","_t6","_context9","qrContainer","displayFallbackImage","size","margin","dataUrl","parentElement","querySelector","style","display","classList","add","generateQRCodeClientSide","_x8","_x9","_this4","QRCode","canvas","width","height","ctx","getContext","toCanvas","color","dark","light","fillStyle","font","textAlign","fillText","toDataURL","x","y","logo","Image","onload","logoSize","logoX","logoY","fillRect","drawImage","src","String","toUpperCase","_refreshQR","_callee0","_t7","_args0","_context0","_x0","_this5","setInterval","_callee1","_t8","_context1","refreshQR","_makeRequest","_callee10","endpoint","_window$SunuIDConfig4","_window$SunuIDConfig5","sanitizedData","endpointPath","retryCount","_loop","_ret","_this6","_context11","sanitizeRequestData","endpoints","dataKeys","Object","keys","controller","timeoutId","_response4","errorText","errorData","_t9","_context10","AbortController","abort","signal","clearTimeout","text","e","statusText","responseKeys","name","Promise","resolve","d","_regeneratorValues","_x1","_x10","sanitized","_i","_Object$entries","entries","_Object$entries$_i","sanitizeInput","_typeof","Math","random","toString","substr","clearInterval","disconnect","sunuidInstance","initSunuID"],"mappings":"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"}